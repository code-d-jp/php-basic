# 演算子

変数に代入したデータは後続の処理で再利用することができます。次のプログラム（var13.php）を作成してみましょう。

```php
<?php
$price = 1000;
$count = 10;
$total_price = $price * $count;
echo $total_price; # => 10000
```

上記のプログラムでは変数`$price`と変数`$count`を定義し、それぞれ`1000`と`10`という整数型のデータを代入しています。それから`$price * $count`によって1000 x 10を計算し`$total_price`に代入しています。最後の`echo`によって`$total_price`を出力すると`10000`という値が表示されます。

さて、ここで注目したいのは演算子についてです。演算子とは計算記号のことで上記のプログラムの中で登場した掛け算を行う`*`や代入を行う`=`などが該当します。本章ではPHPに用意されているいくつかの演算子について取り上げます。

## 主要な演算子

まずはPHPに用意されている主要な演算子について整理しておきましょう。


|名前|役割|例|
|:--|:--|:--|
|代数演算子|加算、減算、乗算、除算、剰余、累乗|`+`,`-`,`*`, `/`,`%`,`**`|
|加算子/減算子|変数の値を1増やす、1減らす|`++`, `--`|
|文字列演算子|文字列の結合| `.` |
|代入演算子|変数への代入|`=`,`+=`,`-=`,`*=`,`%=`,`.=`|
|比較演算子|値の大小比較|`>`,`>=`,`<`,`<=`,`==`,`!=`|
|論理演算子|論理積、論理和、否定|`&&`, <code>&#124;&#124;</code>, `!`|

> PHPには他にも、ビット演算子、エラー制御演算子、実行演算子、配列演算子、型演算子などが用意されています。

## 代数演算子

まずは代数演算子から確認していきましょう。代数演算子は足し算や引き算、掛け算、割り算のような四則演算が中心になります。次のプログラム（var14.php）を作成してみましょう。

```php
<?php
$x = 5;
$y = 2;
$z = $x + $y;
echo $z; # => 7

$z = $x - $y;
echo $z; # => 3

$z = $x * $y;
echo $z; # => 10

$z = $x / $y;
echo $z; # => 2.5

$z = $x % $y;
echo $z; # => 1

$z = $x ** $y;
echo $z; # => 25
```

プログラムの実行結果から四則演算の様子が確認できるでしょう。注意しておきたいのは除算を行う`/`、剰余（余り）を求める`%`、累乗を求める*`**`です。

まず除算を行う`/`演算子は結果が浮動小数点数型になる点を確認しておいてください。`5 / 2`の結果は`2.5`となります。

> `5 / 2`は`2`（余り1）のように整数型とならない点に注意してください。商を整数型で求めたい場合はintdiv関数を使うなど工夫する必要があります。

続いて剰余演算子`%`についてです。これは除算時の余りをもとめる演算子です。たとえば`5 % 2;`の場合は、余りである1が返ります。

> 剰余演算子は変数の値が2の倍数や3の倍数などとチェックしたい場合に利用します。2の倍数かチェックするには、求めた剰余（余り）が0かどうかで判定できます。

最後に累乗演算子`%%`です。たとえば`5 ** 2;`の場合は、5の2乗である25が返ります。

もう一つ四則演算に慣れるために簡単なプログラムを作成してみましょう。次のプログラム（var15.php）を作成してみましょう。

```php
<?php
$age = 20;
$age = $age + 1;
echo $age; # => 21
```

上記のプログラムを実行すると`21`という結果が出力されます。プログラミングを習い始めの頃は`$age = $age + 1;`の部分が少し難しく感じるかもしれません。代入演算子`=`の左辺と右辺に同じ変数`$age`が出てくるからです。プログラムの実行には順序があり、基本的には上から下に処理は流れていきます。

```php
$age = 20;
```

上記のプログラムが処理された時点で変数`$age`には20が代入されています。そのため`$age = $age + 1;`は`$age = 20 + 1;`と解釈することができます。

```php
# $age = 20 + 1; と同じ意味
$age = $age + 1;
```

> 代入演算子`=`を見つけたら、`=`の後の部分（`$age + 1`）が先に処理されると考えてください。これは代入演算子`=`に比べて代数演算子（`+`など）の方が処理の優先度が高いためです。


## 加算子/減算子

続いて加算子`++`と減算子`--`について見ていきましょう。まずは加算子`++`を扱うプログラムです。次のプログラム（var16.php）を作成してみましょう。

```php
<?php
$age = 20;
$age++;
echo $age; #=> 21
```

上記のプログラムを実行すると`21`という結果が出力されます。加算子`++`は変数の値を`1`増やすための演算子で`$age = $age + 1`と同じように動作します。プログラミングをしていると後で学習する繰り返し処理（`for`文）や配列の取り扱いなど、変数の値を1増やしたいというケースは頻繁に発生します。加算子`++`を使うとプログラムをシンプルに表現できます。

同様に減算子`--`を扱うプログラムも見てみましょう。先ほどのプログラム（var16.php）を次のように修正してみましょう。

```
<?php
$age = 20;
$age--;
echo $age; #=> 19
```

上記のプログラムを実行すると`19`という結果が出力されます。減算子`--`は変数の値を`1`増やすための演算子で`$age = $age + 1`と同じように動作します。

> 加算子`++`はインクリメント、減算子`--`はデクリメントと呼ぶこともあります。


## 文字列演算子

続いて文字列演算子`.`について見ていきましょう。文字列演算子`.`は2つのデータを文字列として連結する演算子です。次のプログラム（var17.php）を作成してみましょう。

```php
<?php
$message = "Hello ";
$name = "Andy";
$message = $message . $name;
echo $message; # => Hello Andy
```

上記のプログラムを実行すると`Hello Andy`という結果が出力されます。文字列演算子`.`によって2つの変数に代入されている文字列データが上手く結合できることがわかります。

文字列演算子`.`は文字列と整数値など、異なる型のデータを結合することもできます。次のプログラム（var18.php）を作成してみましょう。

```php
<?php
$label = "AGE:";
$age = 20;
echo $label . $age; # => AGE:20
```

上記のプログラムを実行すると`AGE:20`という結果が出力されます。

> 内部的には文字列演算子`.`によって、整数型のデータ`20`は文字列型のデータ`"20"`に変換されて結合されます。型の変換の詳細については後述します。


### 改行について

ここで文字列データの改行について見ておきましょう。PHPには`PHP_EOL`という名前の定数が用意されています。定数とはPHPの中で予め定義されているデータのことです。PHPの定数はアルファベットの大文字で表現されています。

`PHP_EOL`のEOLとはEnd Of Line（行の終わり）という意味で改行コードを意味します。PHP_EOL定数を使うことでEnterキーで改行するときのように出力が行頭に折り返すようになります。次のプログラム（var19.php）を作成してみましょう。

```php
<?php
$name = "Andy";
$name2 = "Betty";
echo $name . PHP_EOL;
echo $name2 . PHP_EOL;
```

それでは作成したプログラムを実行してみましょう。

```
$ php var19.php
Andy
Betty
```

実行結果に改行が含まれていることがわかります。

> 改行コードはWindowsやmacOS、Linuxなどプラットフォームによって異なります。Windowsは`¥r¥n`、macOSやLinuxでは`¥n`です。PHP_EOL定数はプラットフォームに合わせた改行コードを出力します。


## 代入演算子

続いて代入演算子です。代入演算子`=`はこれまでに何度も見てきたとおり変数にデータを代入するための演算子です。PHPには通常の代入演算子に加えて、演算と代入をまとめて行うことのできる複合代入演算子も用意されています。次のプログラム（var20.php）を作成してみましょう。

```php
<?php
$price = 1000;
$price += 500;
$price *= 1.08;
echo $price; # => 1620
```

上記のプログラムを実行すると`1620`という結果が出力されます。今回注目してほしいのは`$price += 500;`や`$price *= 1.08;`といった部分です。`+=`や`*=`といった演算子を複合代入演算子と呼びます。複合代入演算子は以下のように動作します。

```php
# $price = $price + 500; と同じ
$price += 500;

# $price = $price * 1.08; と同じ
$price *= 1.08;
```

文字列演算子も複合代入演算子`.=`として利用できます。次のプログラム（var21.php）を作成してみましょう。

```php
<?php
$message = "Hello ";
$message .= "Andy";
echo $message; # => Hello Andy
```

出力結果から、複合代入演算子`.=`によって変数`$message`に文字列データが結合されているのがわかります。


## 比較演算子

続いて比較演算子です。比較演算子は2つのデータの大小を比較する用途に使います。次のプログラム（var22.php）を作成してみましょう。

```php
<?php
$apple = 100;
$banana = 200;
$result = $apple > $banana;
var_dump($result); # => bool(false)
```

上記のプログラムを実行すると`bool(false)`という結果が出力されます。比較演算子`>`による評価は必ず論理型になる点がポイントです。`$apple > $banana`が評価されると条件は成立しないので論理型データ`false`となります。

> 論理型のデータはechoで出力せずにvar_dump関数で出力しています。

先ほどのプログラム（var22.php）を少し修正してみましょう。`>`を`<`に変更してみましょう。

```php
<?php
$apple = 100;
$banana = 200;
$result = $apple < $banana;
var_dump($result); # => bool(true)
```

上記のプログラムを実行すると`bool(true)`という結果が出力されます。`$apple < $banana`が評価されると条件は成立するので論理型データ`true`となります。

> 値の大小比較には`>=`や`<=`を使うこともできます。この場合、以上（以下）といった比較になります。

もう一度プログラム（var22.php）を少し修正してみましょう。比較演算子`<`から`==`に変更してみましょう。


```php
<?php
$apple = 100;
$banana = 200;
$result = $apple == $banana;
var_dump($result); # => bool(false)
```

上記のプログラムを実行すると`bool(false)`という結果が出力されます。`==`演算子は等しいかどうかを比較する演算子です。`$apple == $banana`が評価されると条件は成立しないので論理型データ`false`となります。

また等しくないかどうか比較するときには`!=`演算子を利用することができます。プログラム（var22.php）を次のように修正してみましょう。

```php
<?php
$apple = 100;
$banana = 200;
$result = $apple != $banana;
var_dump($result); # => bool(true)
```

上記のプログラムを実行すると`bool(true)`という結果が出力されます。`!=`演算子は等しくないかどうかを比較する演算子です。`$apple != $banana`が評価されると条件は成立しないので論理型データ`true`となります。


> 演算子の優先度についても復習しておきましょう。代入演算子`=`を見つけたら、`=`の後の部分（`$apple != $banana`）が先に処理されると考えてください。これは代入演算子`=`に比べて比較演算子（`>`など）の方が処理の優先度が高いためです。

