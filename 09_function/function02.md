# 文字列を扱う関数

ここでは文字列を扱う関数について見ていきましょう。ここでは以下の関数を取り上げます。

+ strlen — 文字列の長さを得る
+ strrev — 文字列を逆順にする
+ strtolower — 文字列を小文字にする
+ strtoupper — 文字列を大文字にする
+ trim — 文字列の先頭および末尾にあるホワイトスペースを取り除く
+ str_pad — 文字列を固定長の他の文字列で埋める
+ substr — 文字列の一部分を返す
+ explode — 文字列を文字列により分割する
+ implode — 配列要素を文字列により連結する

> 文字列を扱う関数はString関数と呼ぶこともあります。String関数の詳細については[PHP マニュアル 関数リファレンス テキスト処理 文字列](http://php.net/manual/ja/book.strings.php)を参照してください。


## strlen — 文字列の長さを得る

`strlen`関数は文字列の長さ（文字数）を調べる関数です。テキストエディタを開いて次のプログラム（string1.php）を作成してみましょう。

```
<?php
$str = "Hello World";
$length = strlen($str);
echo $length . PHP_EOL;
```

`strlen`関数は引数に、文字列長を調べる対象となる文字列を指定します。上記の場合は`$str`を引数に指定しているので、`$str`に代入されているデータである`"Hello World"`の文字数が`strlen`関数の戻り値として返却されます。また戻り値を受け取るために`$length`変数を用意しています。

作成したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string1.php
11
```

実行結果から`"Hello World"`の文字数である`11`が出力されているのがわかります。

> スペースやタブ、改行コードなども文字数としてカウントされるので注意してください。


## strrev — 文字列を逆順にする

`strrev`関数は文字列を逆順にする関数です。次のプログラム（string2.php）を作成してみましょう。

```
<?php
$str = "Hello World";
$reversed_str = strrev($str);
echo $reversed_str . PHP_EOL;
```

`strrev`関数は引数に、逆順の対象となる文字列を指定します。上記の場合は`$str`を引数に指定しているので、`$str`に代入されているデータである`"Hello World"`を逆順にした文字列が`strrev`関数の戻り値として返却されます。また戻り値を受け取るために`$reversed_str`変数を用意しています。

作成したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string2.php
dlroW olleH
```

実行結果から`"Hello World"`を逆順にした文字列である`"dlroW olleH"`が出力されているのがわかります。


## strtolower — 文字列を小文字にする

`strtolower`関数は文字列を小文字に変換する関数です。次のプログラム（string3.php）を作成してみましょう。

```
<?php
$str = "Hello World";
$lower_case = strtolower($str);
echo $lower_case . PHP_EOL;
```

`strtolower`関数は引数に、変換対象となる文字列を指定します。上記の場合は`$str`を引数に指定しているので、`$str`に代入されているデータである`"Hello World"`を小文字に変換した文字列が`strtolower`関数の戻り値として返却されます。また戻り値を受け取るために`$lower_case`変数を用意しています。

作成したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string3.php
hello world
```

実行結果から`"Hello World"`を逆順にした文字列である`"hello world"`が出力されているのがわかります。


## strtoupper — 文字列を大文字にする

`strtoupper`関数は文字列を大文字に変換する関数です。次のプログラム（string4.php）を作成してみましょう。

```
<?php
$str = "Hello World";
$upper_case = strtoupper($str);
echo $upper_case . PHP_EOL;
```

`strtoupper`関数は引数に、変換対象となる文字列を指定します。上記の場合は`$str`を引数に指定しているので、`$str`に代入されているデータである`"Hello World"`を大文字に変換した文字列が`strtoupper`関数の戻り値として返却されます。また戻り値を受け取るために`$upper_case`変数を用意しています。

作成したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string4.php
HELLO WORLD
```

実行結果から`"Hello World"`を逆順にした文字列である`"HELLO WORLD"`が出力されているのがわかります。

## trim — 文字列の先頭および末尾にあるホワイトスペースを取り除く

`trim`関数は文字列の前後にあるホワイトスペースを取り除く関数です。次のプログラム（string5.php）を作成してみましょう。

> ホワイトスペースとはスペースやタブ、改行コードを意味します。

```
<?php
$str = "   Hello World   ";
$trimmed_str = trim($str);
echo $trimmed_str . PHP_EOL;
```

`trim`関数は引数に、変換対象となる文字列を指定します。上記の場合は`$str`を引数に指定しているので、`$str`に代入されているデータである`"   Hello World   "`から前後のホワイトスペースを取り除いた文字列が`trim`関数の戻り値として返却されます。また戻り値を受け取るために`$trimmed_str`変数を用意しています。

作成したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string5.php
Hello World
```

実行結果から`"   Hello World   "`の前後のホワイトスペースを取り除いた文字列である`"Hello World"`が出力されているのがわかります。

> 他にも、文字列の後方部分のホワイトスペースだけを取り除くrtrim関数 前方部分のホワイトスペースだけを乗り除くltrim関数も用意されています。


## str_pad — 文字列を固定長の他の文字列で埋める

`str_pad`関数は文字列の文字数を調整する関数です。不足する部分を指定した文字で補完できます。次のプログラム（string6.php）を作成してみましょう。

> ホワイトスペースとはスペースやタブ、改行コードを意味します。

```
<?php
$str = "Hello";
$padded_str = str_pad($str, 10);
echo $padded_str . "World" . PHP_EOL;
```

`str_pad`関数には2つの引数を指定します。

+ 第1引数
  + 文字数の調整対象となる文字列
+ 第2引数
  + 文字数

さきほどのプログラムの場合は`str_pad`関数の第1引数に`$str`、第2引数に`10`を指定しているので、`$str`に代入されているデータである`"Hello"`が`10`文字となるように半角スペースで補完した結果が、`str_pad`関数の戻り値として返却されます。また戻り値を受け取るために`$padded_str`変数を用意しています。

作成したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string6.php
Hello     World
```

実行結果から`"Hello"`の後に半角スペースが5文字分追加されているのがわかります。

> `"Hello     "`で文字列の長さが10になります。

str_padは第3引数に補完する文字を指定することもできます。さきほどのプログラム（string6.php）を修正してみましょう。

```
<?php
$str = "Hello";
$padded_str = str_pad($str, 10, "*");
echo $padded_str . "World" . PHP_EOL;
```

上記の場合、第3引数に補完文字として`"*"`を指定しています。修正したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string6.php
Hello*****World
```

実行結果から半角スペースでなく`"*"`で補完されていることがわかります。

もう一つ、`str_pad`関数には第4引数の指定によって前方補完（`STR_PAD_RIGHT`）、後方補完（`STR_PAD_LEFT`）、前後方補完（`STR_PAD_BOTH`）を指定することができます。さきほどのプログラム（string6.php）を修正してみましょう。

```
<?php
$str = "Hello";
$padded_str = str_pad($str, 10, "*", STR_PAD_LEFT);
echo $padded_str . "World" . PHP_EOL;
```

ここでは第4引数に`STR_PAD_LEFT`定数を指定しています。

> ここで登場する`STR_PAD_LEFT`や`STR_PAD_RIGHT`、`STR_PAD_BOTH`は定数と呼ばれるもので、予めPHPの中に用意されているキーワードと考えると良いでしょう。


修正したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
❯ php string6.php
*****HelloWorld
```

実行結果から出力の前方部分が補完されているのがわかります。

### 引数の指定について

str_pad関数のように、引数の数が変化する関数は多くあります。str_pad関数の場合、少なくとも2つの引数が必要ですが、第3引数や第4引数は省略可能となっています。これらを省略した場合は、補完文字として半角スペース、補完方法には後方補完（STR_PAD_LEFT）がデフォルト値として使われるようになっています。必要に応じて、第3引数、第4引数を指定するようにします。

## substr — 文字列の一部分を返す

`substr`関数は文字列を一部分を返却する関数です。次のプログラム（string7.php）を作成してみましょう。

```
<?php
$str = "Hello World";
$sub = substr($str, 6);
echo $sub . PHP_EOL;
```

`substr`関数は引数を2つ指定します。

+ 第1引数
  + 部分文字列の取得対象となる文字列
+ 第2引数
  + 開始位置

さきほどのプログラムの場合は`substr`関数の第1引数に`$str`、第2引数に`6`を指定しています。この場合、`substr`関数は`"Hello World"`という文字列の`6`文字目以降を戻り値として返します。

作成したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string7.php
World
```

実行結果から`"Hello World"`を6文字目から5文字文に該当する`"World"`が出力されているのがわかります。

> 文字列も配列と同様に先頭は0からカウントします。

またsubstr関数の第3引数に開始位置からの文字数を指定することも可能です。さきほどのプログラム（string7.php）を修正してみましょう。

```
<?php
$str = "Hello World";
$sub = substr($str, 6, 3);
echo $sub . PHP_EOL;
```

修正したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string7.php
Wor
```

実行結果から`"Hello World"`を6文字目から3文字分に該当する`"Wor"`が出力されているのがわかります。


## explode — 文字列を文字列により分割する

`explode`関数は文字列を配列に置き換える関数です。対象の文字列を指定した文字によって配列に分割します。次のプログラム（string8.php）を作成してみましょう。

```
<?php
$str = "Andy,Betty,Carol";
$array = explode(",", $str);
print_r($array);
```

`explode`関数には2つの引数を指定します。

+ 第1引数
  + 区切り文字
+ 第2引数
  + 変換対象となる文字列

さきほどのプログラムの場合は`explode`関数の第1引数に`","`、第2引数に`$str`を指定しているので、`$str`に代入されているデータである`"Andy,Betty,Carol"`を区切り文字`","`によって分割した結果（配列）が`explode`関数の戻り値として返却されます。また戻り値を受け取るために`$array`変数を用意しています。

> `$array`には配列が代入されます。配列はechoで出力できないため、print_r関数で出力しています。

作成したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string8.php
Array
(
    [0] => Andy
    [1] => Betty
    [2] => Carol
)

```

実行結果から`"Andy,Betty,Carol"`が3つの要素を持つ配列に変換されているのがわかります。


## implode — 配列要素を文字列により連結する

`implode`関数は配列を文字列に置き換える関数です。対象の配列を指定した文字で連結して文字列に置き換えます。次のプログラム（string9.php）を作成してみましょう。

```
<?php
$array = ["Andy", "Betty", "Carol"];
$str = implode(",", $array);
echo $str . PHP_EOL;
```

`implode`関数には2つの引数を指定します。

+ 第1引数
  + 区切り文字
+ 第2引数
  + 変換対象となる配列

さきほどのプログラムの場合は`implode`関数の第1引数に`","`、第2引数に`$array`を指定しているので、`$array`に代入されているデータである`["Andy", "Betty", "Carol"]`を区切り文字`","`によって連結した結果（文字列）が`implode`関数の戻り値として返却されます。また戻り値を受け取るために`$str`変数を用意しています。

作成したプログラムを実行してみましょう。ターミナルから次のように実行します。

```
$ php string9.php
Andy,Betty,Carol
```

実行結果から配列`["Andy", "Betty", "Carol"]`が文字列`"Andy,Betty,Carol"`に変換されているのがわかります。

